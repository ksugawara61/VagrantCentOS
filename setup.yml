---
- hosts: all
  become: yes
  tasks:

    # for default setting
    - name: Change timezone from UTC to JST
      file:
        src: /usr/share/zoneinfo/Asia/Tokyo
        dest: /etc/localtime
        owner: root
        group: root
        state: link
    - name: Install package vim
      yum: pkg=vim state=latest
    - name: Install package wget
      yum: pkg=wget state=latest
    - name: Install package epel-release
      yum: name=https://dl.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-11.noarch.rpm
    - name: Install package htop
      yum: pkg=htop state=latest

    # for git setting
    - name: Install package git
      yum: pkg=git-all state=latest

    # for docker setting
    - name: Add docker-ce repository
      shell: yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
    - name: Install package docker
      yum: pkg=docker-ce-18.06.3.ce-3.el7 state=latest

    # for docker-compose setting
    - name: Fetch and Install package docker-compose
      get_url:
        url: https://github.com/docker/compose/releases/download/1.24.0/docker-compose-Linux-x86_64
        dest: /usr/local/bin/docker-compose
        owner: root
        group: root
        mode: '0755'
    - name: Set user group to vagrant user for using docker-compose
      user:
        name: vagrant
        group: vagrant
        groups: docker
    - name: Restart docker deamon for setting docker-compose
      shell: systemctl restart docker
